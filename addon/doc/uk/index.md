# NVDA Quick Dictionary (Швидкий словник)

Ласкаво просимо до додатку NVDA Quick Dictionary, котрий дозволить вам швидко отримати словникову статтю з перекладом слова або словосполучення на обрану мову за допомогою натискання комбінації клавіш. Основних комбінацій клавіш небагато і всі вони інтуітивно зрозумілі та зручні тому Ви швидко їх запам'ятаєте.

Словникові статті містять докладну інформацію про слово, таку як частина мови, рід, множина чи однина, варіанти перекладу, перелік значень, синоніми та детальні приклади. Така інформація буде корисною для людей, які вивчають іноземні мови, або прагнуть використовувати у спілкуванні все багатство та різноманіття власної мови.

Додаток підтримує декілька сервісів онлайн словників. Ви можете обрати потрібний віддалений словник у відповідному діалоговому вікні або скориставшись клавішними командами. Кожен доступний сервіс має власну панель налаштувань.

Також наявні додаткові функції для роботи з профілями синтезаторів голосу. Ви можете асоціювати профіль синтезатора голосу з певною мовою, після чого переклади на цю мову будуть автоматично озвучуватись обраним синтезатором.

Нижче наведені всі можливості додатку та комбінації клавіш для керування ними. За замовчуванням всі функції викликаються за допомогою дворівневих клавішних команд. Але для будь-якого з перерахованих методів, ви завжди можете призначити зручні для вас комбінації клавіш. Це можна зробити в діалоговому вікні NVDA "Параметри" -> "Жести вводу...".

## Отримання словникової статті
Для того, щоб отримати статтю зі словника необхідно спочатку виділити слово, яке Вас цікавить або скопіювати його до буфера обміну. Після чого достатньо лише двічі натиснути комбінацію клавіш NVDA+Y.

Існує також інша можливість отримання запису зі словника: одноразове натискання NVDA+Y перемикає клавіатуру в режим керування додатком, а далі просто скористайтесь клавішою D.

Примітка: Перед тим як виконати запит до віддаленого сервісу додаток повинен отримати слово або словосполучення, що цікавить користувача. Послідовність дій які додаток виконує щоразу перед зверненням до словника:

* отримує виділений текст і виконує запит;
* якщо немає виділеного тексту - отримується текстовий вміст буфера обміну і виконується віддалений запит;
* якщо буфер обміну порожній або його вміст не є текстовими даними - додаток повідомляє про це користувачу і не виконує подальших дій.

## Режим керування додатком
Для доступу до всіх функцій додатку потрібно переключитись в режим керування додатком, це можна зробити натиснувши одноразово NVDA+Y. Ви почуєте короткий низький звуковий сигнал і зможете скористатись іншими командами, які буде описано нижче. При натисканні клавіші, яка не використовується у додатку, ви почуєте інший сигнал, що сповістить про помилкову команду і режим керування додатком буде автоматично вимкнений.

## Анонс обраної пари мов при роботі зі словником
Щоб дізнатись актуальні мову оригіналу та мову перекладу виконайте наступні дії:

1. Увімкніть режим керування додатком за допомогою комбінації клавіш NVDA+Y.
2. Натисніть A, щоб прослухати, які мови обрані для отримання даних зі словника.

## Зміна місцями мови оригіналу та мови перекладу
Це можна швидко зробити наступним чином:

1. Виділити слово чи словосполучення, яке Вас цікавить.
2. Увімкнути режим керування додатком за допомогою NVDA+Y, після чого натиснути S.

Ви почуєте повідомлення про те, що мови змінено та наявну інформацію зі словника.

Примітка: Щоразу при зміні мов додаток виконує перевірку чи доступна нова пара мов для перекладу у віддаленому словнику. Якщо таке поєднання мов відсутнє - ви почуєте відповідне попередження.

## Відображення словникової статті в окремому вікні у вигляді веб-сторінки
Статтю зі словника можна також відобразити в окремому вікні у вигляді форматованої веб-сторінки:

1. Виділити слово або словосполучення.
2. Увімкнути режим керування додатком - NVDA+Y.
3. Натиснути W.

Примітка: У цьому вікні можна використовувати стандартні команди навігації елементами веб-сторінки. Щоб закрити вікно достатньо натиснути Escape або Alt+F4.

## Підготовка тексту
Інколи виникає потреба відредагувати текст перед відправкою його на переклад або просто ввести текст самостійно.

Для цього ви можете скористатись командою попереднього редагування тексту - натисніть клавішу E в режимі керування додатком (NVDA+Y). Відкриється діалогове вікно з багаторядковим полем для редагування тексту. Після правки просто натисніть Ctrl+Enter або відповідну кнопку.

В полі для редагування також доступні наступні команди:

* Ctrl+A - віділити все;
* Ctrl+E - очистити текст від не літерних символів;
* Ctrl+R - очистити поле редактора;
* Ctrl+U - відновити початковий текст.

Примітка: Якщо перед викликом діалогу для правки тексту був попередньо виділений текст або скопійований до буфера обміну, то він буде розміщений в полі редактора в цьому діалоговому вікні.

## Копіювання результатів останнього запиту до буфера обміну
Це можна зробити виконавши наступну послідовність дій:

1. Увімкнути режим керування додатком - NVDA+Y.
2. Натиснути клавішу C.

Після цього ви почуєте повідомлення про те, що дані скопійовано та саму словникову статтю.

Примітка: Якщо перед цим ще не виконувалось запитів до віддаленого словника - ви почуєте відповідне попередження.

Якщо в налаштуваннях додатку увімкнута опція копіювання словникових статей до буфера обміну, дані будуть автоматично копіюватись після кожного успішного запиту.

## Завантаження актуального списку доступних мов
Скористайтесь клавішею U в режимі керування додатком для того, щоб завантажити та зберегти з онлайн-словника актуальний список доступних мов оригіналу та мов перекладу.

Після цього ви почуєте повідомлення про стан виконання команди.

## Вибір онлайн-сервісу
Обрати віддалений словник, до якого будуть надсилатись запити з додатку, можна кількома способами.

* Скориставшись меню NVDA: натисніть NVDA+N, перейдіть до підменю "Інструменти", далі - "Швидкий словник" та активуйте пункт меню "Обрати онлайн-сервіс...". З'явиться діалогове вікно вибору віддаленого сервісу. В цьому вікні клавішами вгору або вниз перейдіть на потрібний пункт та натисніть Enter. Або ж просто натисніть цифру, яка відповідає порядковому номеру онлайн-сервісу, який вас цікавить.
* Діалогове вікно вибору сервісу також можна викликати натиснувши клавішу F в режимі керування додатком.
* За кожним наявним сервісом також закріплена функціональна клавіша починаючи від F1 в режимі керування додатком.
* І нарешті сервіс можна обрати безпосередньо в панелі налаштувань додатку.

Примітка: Кожен онлайн-сервіс має власну панель налаштувань і всі його параметри зберігаються окремо.

## Інформація про обраний сервіс
Натиснувши Q в режимі керування додатком можна прослухати наступні дані:

* назва обраного онлайн-сервісу;
* кількість підтримуваних мов;
* розділ словника (якщо підтримується);
* статистику та ліміти використання поточного сервісу;
* стан кешу запитів (потрапляння/промахи/розмір/використано).

## Діалогове вікно налаштувань додатку
Щоб змінити параметри додатку, потрібно відкрити діалогове вікно його налаштувань. Це можна зробити наступним чином: натиснути NVDA+Y і після цього літеру O.

На екрані з'явиться стандартне діалогове вікно налаштувань NVDA з відкритим розділом нашого додатку.

Також цей діалог можна відкрити через меню NVDA: натисніть NVDA+N, перейдіть до підменю "Інструменти", далі - "Швидкий словник" та активуйте пункт "Параметри...".

### Вибір онлайн-сервісу
Відкривши діалогове вікно налаштувань додатку, курсор NVDA відразу встановлюється на випадаючий список вибору онлайн-сервісу. Ви можете обрати потрібний вам сервіс зі списку і натиснути Enter, або Tab для переходу до наступного параметра.

Як вже зазначалось вище - кожен сервіс має власну панель налаштувань. Тому всі наступні параметри для кожного сервісу можуть відрізнятись. Розглянемо найбільш загальні з них.

### Вибір мов для отримання перекладів
Перейшовши до списку мов оригіналу, клавішами вгору або вниз оберіть потрібну мову та натисніть Tab для переходу до вибору мови перекладу.

Примітка:

* Список доступних мов перекладу залежить від обраної мови оригіналу, тому мову перекладу потрібно обирати лише після встановлення мови оригіналу.
* В деяких сервісах списки доступних мов залежать від обраного розділу словника.

### Опція "Копіювати до буфера обміну"
Після встановлення цієї галочки, отримані від словника дані будуть копіюватись до буфера обміну після кожного запиту.

### Опція "Автоматично змінювати порядок мов"
Після включення цієї опції, додаток при неуспішних запитах до словника буде намагатись отримати дані вдруге помінявши місцями мову оригіналу та мову перекладу.

Примітка: Якщо зворотна комбінація мов недоступна - ви будете чути відповідне попередження про це щоразу.

### Опція "Використовувати альтернативний сервер"
Після увімкнення цієї опції, додаток буде відправляти запити не напряму до віддаленого словника, а використовуватиме альтернативний проміжний сервер, який перенаправляє всі запити далі.

### Код доступу до віддаленого сервісу
Для використання сервісу віддалених словників рекомендується отримати власний код доступу. За замовчуванням в додатку вже використовується попередньо зареєстрований код доступу. Але використовуваний в додатку віддалений сервіс словників накладає певні обмеження і ліміти запитів на кожного безкоштовного користувача. Тому при масовому використанні одного кода доступу - рано чи пізно його можуть заблокувати. Щоб уникнути цього рекомендується зареєструвати власний код доступу та вказати його в налаштуваннях додатку.

Посилання для реєстрації ви знайдете за полем для введення кода доступу, натиснувши на нього ви перейдете на відповідну веб-сторінку.

Примітка: Посилання для реєстрації відображається лише при використанні кода доступу за замовчуванням. Після того, як ви вкажете в налаштуваннях власний код доступу, це посилання буде приховане. Для того, щоб відновити код доступу за замовчуванням, просто очистіть поле для його введення та натисніть "Гаразд". Початковий код доступу буде відновлено в конфігурації додатку і ви побачите його відкривши наступного разу діалогове вікно налаштувань.

## Додавання та керування профілями голосових синтезаторів
В додатку реалізована можливість озвучувати отримані словникові статті за допомогою асоційованих з ними та наперед налаштованих голосових синтезаторів.

Щоб скористатись цією можливістю, спочатку необхідно створити та зберегти профілі голосових синтезаторів, а потім в діалоговому вікні налаштуваннь додатку асоціювати ці профілі з мовами для яких вони будуть активовуватись.

Після цього при отриманні перекладу для кожної заданої мови буде автоматично вмикатись голосовий синтезатор асоційований з нею.

Керувати профілями можна за допомогою клавішних команд або через відповідне діалогове вікно. Щоб відкрити діалогове вікно зі списком профілів голосових синтезаторів - натисніть NVDA+N, перейдіть до підменю "Інструменти", далі - "Швидкий словник" і активуйте пункт меню "Профілі голосових синтезаторів..." або просто натисніть клавішу P в режимі керування додатком (NVDA+Y).

### Створення профілю голосового синтезатора
Можна створити до 9 профілів налаштувань для різних голосових синтезаторів які доступні в NVDA.

Перемикатись між профілями можна за допомогою цифрових клавіш від 1 до 9 в режимі керування додатком.

Наприклад, щоб створити профіль під номером 5 слід виконати наступні дії:

1. Перейти в режим керування додатком за допомогою NVDA+Y.
2. Натиснути клавішу 5. Ви почуєте повідомлення про те що вибраний профіль за номером 5.
3. Перейти до розділу "Мовлення" налаштувань NVDA за допомогою комбінації клавіш NVDA+Ctrl+V та налаштувати потрібний голосовий синтезатор, який буде збережено в обраному профілі. Після чого натиснути кнопку "Гаразд".
4. Зберегти налаштований синтезатор в обраному профілі - натиснути NVDA+Y та після клавішу V. Ви почуєте повідомлення про успішне збереження профілю голосового синтезатора.

Примітка: Цю та інші операції також можна виконати в діалоговому вікні "Профілі голосових синтезаторів...".

### Активація голосового синтезатора за замовчуванням
Щоб повернутись до використання початкового голосового синтезатора натисніть NVDA+Y, після чого - клавішу R. Це відновить роботу голосового синтезатора, який був встановлений при запуску NVDA, і ви почуєте його назву та обраний голос.

### Перемикання між профілями
Як вже згадувалось раніше - перемикатись між профілями голосових синтезаторів можна за допомогою цифрових клавіш в режимі керування додатком.

При цьому якщо в профілі вже наявні налаштування голосового синтезатора, то буде активований відповідний голос і ви почуєте повідомлення з інформацією про номер активованого профілю та назву синтезатора і ім'я голосу. Якщо ж обраний профіль ще не містить ніяких даних - буде виведене повідомлення лише про його номер та перемикання синтезатора не відбудеться.

Примітка: В будь-якому випадку ви можете повернутись до використання голосу за замовчуванням за допомогою клавіші R (в режимі керування додатком NVDA+Y).

### Перемикання до попереднього синтезатора голосу
Швидко повернутись до попереднього синтезатора голосу можна натиснувши клавішу B в режимі керування додатком.

### Повідомлення про обраний в даний момент профіль
Щоб почути який профіль є вибраним в даний момент використовується клавіша G (в режимі керування додатком NVDA+Y).

Якщо профіль містить налаштування голосового синтезатора, то окрім номеру буде також оголошена назва синтезатора та ім'я налаштованого голосу. В протилежному випадку ви почуєте лише номер активного профілю.

### Видалення налаштувань з обраного профілю
Щоб видалити налаштування голосового синтезатора з обраного в даний момент профілю потрібно скористатись клавішею Delete в режимі керування додатком NVDA+Y.

Ви почуєте повідомлення про успішне видалення профілю та його номер.

### Збереження змін
Після кожної маніпуляції з профілем (створення/оновлення/видалення) необхідно зберігати зміни за допомогою клавіші V (в режимі керування додатком NVDA+Y).

Натиснувши цю клавішу ви почуєте відповідне повідомлення.

### Діалогове вікно "Профілі синтезаторів голосу"
Відкрити діалогове вікно зі списком профілів голосових синтезаторів можна з меню NVDA - натисніть NVDA+N, перейдіть до підменю "Інструменти", далі - "Швидкий словник" і активуйте пункт "Профілі голосових синтезаторів..." або просто натисніть клавішу P в режимі керування додатком.

Для кожного профілю у списку вказано його номер, назва синтезатора, ім'я голосу та мову, що асоційована з цим профілем.

Щоб активувати профіль - перейдіть до нього за допомогою клавіш вгору або вниз та натисніть Enter або просто натисніть цифру, що відповідає номеру профілю.

У вказаному діалоговому вікні доступні також і інші операції з профілями голосових синтезаторів. Щоб виконати одну з наступних дій - перейдіть до відповідної кнопки у діалоговому вікні або скористайтесь клавішею, що вказана в дужках:

* створити новий профіль (F7)
* змінити обраний профіль (F4)
* видалити обраний профіль (F8 або Delete)
* оновити список (F5)
* зберегти зміни (F2)

Примітка: За замовчуванням асоційована мова встановлюється як "- Незмінна мова -". Це означає, що перемикання на цей синтезатор не буде здійснюватись. Процес зміни асоційованої мови для кожного профілю буде розглянутий нижче.

### Вибір асоційованої мови
Щоб асоціювати певний профіль з потрібною мовою необхідно виконати наступні дії:

1. Відкрити діалогове вікно налаштувань додатку - комбінація клавіш NVDA+Y після чого O.
2. Знайти та відмітити галочку "Перемикатись між голосовими синтезаторами для обраних мов".
3. Перейти табуляцією до потрібного профілю та зі списку поряд з ним обрати мову, для якої він буде застосовуватись.
4. Натиснути "Гаразд".

Примітка:

* Якщо жодного профілю попередньо не було створено, в діалоговому вікні налаштувань додатку ви побачите повідомлення про це.
* Кожну мову можна асоціювати лише з одним профілем. Якщо ви обрали мову для одного з профілів, вона автоматично буде вилучена з випадаючих списків для інших профілів.
* Щоб не використовувати профіль для перемикання синтезаторів - асоціюйте його з першим пунктом "- Незмінна мова -".

### Процес переключення голосових синтезаторів
Після виконання вказаних вище налаштувань, при отриманні даних зі словника буде автоматично вмикатись обраний вами голосовий синтезатор. А після закінчення оголошення статті знову активується попередній голос.

Примітка: Якщо з якоїсь причини перемикання до попереднього голосового синтезатора не відбулось - ви можете зробити це вручну натиснувши клавішу B або R в режимі керування додатком.

## Довідка по командах додатку
Ознайомитись зі списком всіх команд, що використовуються в додатку можна наступним чином:

* Через меню NVDA - натиснувши NVDA+N, перейти до підменю "Інструменти", далі - "Швидкий словник" і активувати пункт меню "Довідка по командах додатку".
* Натиснути клавішу H в режимі керування додатком (NVDA+Y).

## Довідка
Щоб відкрити довідку по додатку - натисніть NVDA+N, перейдіть до підменю "Інструменти", далі - "Швидкий словник" і активуйте пункт меню "Довідка".

## Подяки
Ми дуже вдячні всім, хто докладає зусиль в розробці, перекладі та підтримці додатку:

* Cagri Dogan - переклад на турецьку мову;
* Wafiqtaher - переклад на арабську мову.

При розробці додатку Quick Dictionary було використано кілька хороших рішень з інших проектів. Дякуємо авторам таких додатків:

* Instant Translate - Alexy Sadovoy, Beqa Gozalishvili, Mesar Hameed, Alberto Buffolino та інші співавтори.
* Для роботи з профілями синтезаторів голосу були використані ідеї з додатку Switch Synth (автор Tyler Spivey).

## Журнал змін

### Версія 2.2
* додаток протестовано на сумісність з NVDA 2023.1;
* виправлено взаємодію з новим API сервісу Lexicala.

### Версія 2.1.5
* додаток протестовано на сумісність з NVDA 2022.1;
* вихідний код значно оптимізовано та додані MyPy підказки типів;
* додаток адаптовано для підтримки Python версій 3.7 та 3.8;
* виправлені помилки форматування у Markdown-файлах;
* додано діалогове вікно для редагування тексту перед відправкою його до віддаленого сервісу;
* відокремлено довідку додатку від ReadMe;
* оновлено переклад на турецьку мову (подяка Cagri Dogan).

### Версія 2.0
* додана можливість підключення інших сервісів онлайн-словників;
* додано сервіс Lexicala та його панель налаштувань;
* додано діалогове вікно вибору онлайн-сервісу зі списку доступних;
* додана команда для отримання інформації про обраний сервіс;
* додано діалогове вікно для роботи з профілями голосових синтезаторів;
* реалізована процедура перемикання до попереднього голосового синтезатора;
* реалізовано паралельний потік для контролю стану синтезатора;
* через збільшення кількості функцій додатку - довідка по командах тепер відображається в окремому вікні;
* оновлено процедуру кешування запитів до онлайн-сервісів;
* додано підменю додатку в меню NVDA;
* оновлено ReadMe.

### Версія 1.2
* додана можливість автоматичного перемикання голосових синтезаторів для обраних мов;
* додана можливість завантаження актуального списку мов, доступних в Інтернет-словнику;
* доданий переклад на турецьку мову, подяка Cagri Dogan.

### Версія 1.1
* змінено деякі комбінації клавіш для керування додатком, які конфліктували з іншими додатками;
* вилучені деякі клавішні команди та надана можливість користувачеві самостійно встановлювати їх;
* змінений опис основних можливостей додатку;
* оновлено довідку та переклад додатку;
* виправлена помилка в українському перекладі додатку (допоміг Володимир Пиріг);
* додано переклад російською.

### Версія 1.0. Особливості реалізації
* виконання запитів до віддаленого сервера в окремому потоці для уникнення блокування роботи NVDA;
* сигнали при очікуванні відповіді від сервера;
* кешування останніх 100 запитів для зменшення навантаження на віддалений сервіс словників;
* перемикання до режиму керування додатком;
* можливість використання альтернативного сервера;
* діалогове вікно налаштувань додатку.

## Внесення змін до NVDA Quick Dictionary
Ви можете клонувати репозиторій проекту, щоб внести зміни до вихідного коду.

### Залежності
Наступні модулі можуть бути встановлені за допомогою pip:

- markdown
- scons
- python-gettext

### Побудова додатку з вихідних кодів
1. Відкрийте командний рядок та перейдіть до кореневого каталогу репозиторію проекту.
2. Запустіть команду **scons**. Створений додаток, якщо не виникне помилок, буде розміщений в поточному каталозі.
